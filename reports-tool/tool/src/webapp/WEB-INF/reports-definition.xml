<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<!-- 
	Notes:
	
	Each report MUST have a different idString.  This is how saved reports are
	linked back to the report definition
    
    ALL YOUR BASE ARE BELONG TO US!
-->
<beans>


    <bean id="testreport1"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677778881</value>
        </property>
        <property name="usesWarehouse"><value>false</value></property>
        <property name="title">
            <value>
                Report Variable Type Test = artifact loading too
            </value>
        </property> <!-- 
        <property name="query">
            <list>
               <value>
                  select id `RESOURCE_ID_artifact` from dw_resource where 1 IN (1, ?, ?, ?, ?, ?, ?, ?)
               </value>
            </list>
        </property> -->
        <property name="query">
            <list>
               <value>
                  select RESOURCE_UUID `RESOURCE_ID_artifact` from content_resource where 1 IN (?, ?, ?, (?), ?, (?), ?)
               </value>
            </list>
        </property>
        <!--  
        <property name="query">
            <list>
               <value>
                select * from SAKAI_SITE where CREATEDBY IN (?, ?, ?, ?, ?, ?, ?)
               </value>
            </list>
        </property> -->
        <property name="resultProcessors">
           <list>
              <ref bean="org.sakaiproject.reports.service.ResultProcessor.defaultArtifactLoader" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                Tests each of the parameter variable types
            </value>
        </property>
        <property name="siteType"><!-- some acceptable values: admin,course,project,cig  -->
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>A Fillin Variable</value></property>
                    <property name="paramName"><value>[fillin]</value></property>
                    <property name="description"><value>a param for the user to fill in</value></property>
                    <property name="type"><value>string</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>fillin</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>a param for the user to fill in</value></property>
                            <!-- (validation rules)/[(elem1; title1), (elem2), elem3,
                                    etc]/ select username, firstName from worksite/value -->
                </bean>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>A Fillin Date</value></property>
                    <property name="paramName"><value>[fillin]</value></property>
                    <property name="description"><value>a param for the user to fill in</value></property>
                    <property name="type"><value>date</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>fillin</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>a param for the user to fill in</value></property>
                            <!-- (validation rules)/[(elem1; title1), (elem2), elem3,
                                    etc]/ select username, firstName from worksite/value -->
                </bean>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>A Set Variable</value></property>
                    <property name="paramName"><value>[set]</value></property>
                    <property name="description"><value>a param for the user to select from a drop down</value></property>
                    <property name="type"><value>string</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>set</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>[(dogs; Goldie), cat, (car), apple, turkey, paper, ]</value></property>
                </bean>

                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>A multi Set Variable</value></property>
                    <property name="paramName"><value>[multiset]</value></property>
                    <property name="description"><value>a param for the user to select from a list box</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>multiset</value></property>
                    <property name="value"><value>[(dogs; Goldie), cat, (car), apple, turkey, paper, {userid}]</value></property>
                </bean>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>A sql Variable</value></property>
                    <property name="paramName"><value>[sql]</value></property>
                    <property name="description"><value>a param for the user to select from a drop down by sql</value></property>
                    <property name="type"><value>string</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>sql</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>select SITE_ID from SAKAI_SITE_USER where USER_ID='{userid}'</value></property>
                            <!-- (validation rules)/[(elem1; title1), (elem2), elem3,
                                    etc]/ select username, firstName from worksite/value -->
                </bean>

                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>A multi sql Variable</value></property>
                    <property name="paramName"><value>[multisql]</value></property>
                    <property name="description"><value>a param for the user to select from a list box by sql</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>multisql</value></property>
                    <property name="value"><value>select SITE_ID from SAKAI_SITE</value></property>
                </bean>
                
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>A static Variable</value></property>
                    <property name="paramName"><value>[static]</value></property>
                    <property name="description"><value>a param set by the definition</value></property>
                    <property name="type"><value>string</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>static</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>{userid}</value></property>
                            <!-- (validation rules)/[(elem1; title1), (elem2), elem3,
                                    etc]/ select username, firstName from worksite/value -->
                </bean>
            </list>
        </property>
        <!-- 
        <property name="forms">
            <list>
                <map>
                    <entry key="formName">
                        <value>Address</value>
                    </entry>
                    <entry key="formFields">
                        <list>
                            <value>state</value>
                            <value>city</value>
                        </list>
                    </entry>
                </map>
            </list>
        </property>
        -->
        <property name="xsls">
            <list>
                <bean id="reportXsl1.1" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report1.1.xsl</value></property>
                    <property name="title"><value>Report Result View X</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
                <bean id="reportXsl1.2" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report1.2.xsl</value></property>
                    <property name="title"><value>Report Result View Y</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
                <bean id="reportXsl1.3" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="title"><value>CSV</value></property>
                    <property name="xslLink"><value>WEB-INF/reportxsls/defaultExport.xsl</value></property>
                    <property name="isExport"><value>true</value></property>
                    <property name="extension"><value>csv</value></property>
                    <property name="target"><value>_self</value></property>
                    <property name="contentType"><value>application/x-csv</value></property>
                    <property name="resultsPostProcessor">
                        <ref bean="org.sakaiproject.reports.service.ResultsPostProcessor.csv"/>
                    </property>
                </bean>
                <bean id="reportXsl1.4" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report1.1.xsl</value></property>
                    <property name="title"><value>HTML</value></property>
                    <property name="isExport"><value>true</value></property>
                    <property name="contentType"><value>text/html</value></property>
                </bean>
            </list>
        </property>
        
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report1.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

    </bean>
    
    
    
    <bean id="testreport2"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677778882</value>
        </property>
        <property name="usesWarehouse"><value>false</value></property>
        <property name="title">
            <value>
                User Story 16 Test
            </value>
        </property>
        <property name="query">
            <list>
               <value>
                select * from SAKAI_SITE where CREATEDBY=?
               </value>
            </list>
            <!-- 
            select BODY, length(BODY) `bodysize` from CONTENT_RESOURCE_BODY_BINARY
                -->
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                This report is to view the portfolio performance
            </value>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report2.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Your user id</value></property>
                    <property name="paramName"><value>[user]</value></property>
                    <property name="description"><value>a param set by the definition</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>static</value></property>
                    <property name="value"><value>{userid}</value></property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean id="reportXsl2.1" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report2.1.xsl</value></property>
                    <property name="title"><value>Report Result View X</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
                <bean id="reportXsl2.2" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report2.2.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
            </list>
        </property>

    </bean>
    
    
    <bean id="artifactTest"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677778883</value>
        </property>
        <property name="title">
            <value>
                Artifact import test
            </value>
        </property>
        <property name="query">
            <list>
               <value>
                  select id `RESOURCE_ID_artifact` from dw_resource
               </value>
            </list>
        </property>
        <property name="resultProcessors">
           <list>
              <ref bean="org.sakaiproject.reports.service.ResultProcessor.defaultArtifactLoader" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                A test to open an artifact and move it into the xml result.
                the column name must end in artifact in order for the code to open the column 
                as an artifact
            </value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report3.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>

        <property name="reportDefinitionParams">
            <list>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean id="reportXsl3.1" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report3.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
                <bean id="reportXsl3.2" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report3.2.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
            </list>
        </property>

    </bean>
    
    
    
    
    <bean id="testreport4"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677778884</value>
        </property>
        <property name="usesWarehouse"><value>false</value></property>
        <property name="title">
            <value>
                Variable Substitution Report
            </value>
        </property>
        <property name="query">
           <list>
              <value>
                select id, uri, resource_type, sub_type, primary_mime_type,
                sub_mime_type, copyright, description from dw_resource
                where 1 or 1 != ?
              </value>
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                A test to open an artifact and move it into the xml result.
                the column name must end in artifact in order for the code to open the column 
                as an artifact
            </value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report3.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>System Values</value></property>
                    <property name="paramName"><value>[set]</value></property>
                    <property name="description"><value>to test all the variables are substituted</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>set</value></property>
                    <property name="value">
                    	<value>[(uname; user: {userid}), 
                    			(name; display name: {userdisplayname}), 
                    			(email; user email: {useremail}),
                    			(fname; first name: {userfirstname}), 
                    			(lname; last name: {userlastname}), 
                    			(worksiteid; worksiteid: {worksiteid}),
                    			(toolid; toolid: {toolid})]</value>
                    </property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
               <bean class="org.sakaiproject.reports.model.ReportXsl">
                   <property name="xslLink"><value>WEB-INF/reportxsls/report3.1.xsl</value></property>
                   <property name="isExport"><value>false</value></property>
               </bean>
               <bean class="org.sakaiproject.reports.model.ReportXsl">
                  <property name="title"><value>CSV</value></property>
                   <property name="xslLink"><value>WEB-INF/reportxsls/defaultExport.xsl</value></property>
                   <property name="isExport"><value>true</value></property>
                  <property name="extension"><value>csv</value></property>
                  <property name="target"><value>_self</value></property>
                  <property name="resultsPostProcessor">
                     <ref bean="org.sakaiproject.reports.service.ResultsPostProcessor.csv"/>
                  </property>
               </bean>
               <bean class="org.sakaiproject.reports.model.ReportXsl">
                  <property name="title"><value>HTML</value></property>
                   <property name="xslLink"><value>WEB-INF/reportxsls/report1.2.xsl</value></property>
                   <property name="isExport"><value>true</value></property>
                  <property name="target"><value>_blank</value></property>
                  <property name="extension"><value>html</value></property>
               </bean>
            </list>
        </property>

    </bean>
    
    
    <bean id="testreport5"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677778835</value>
        </property>
        <property name="usesWarehouse"><value>false</value></property>
        <property name="title">
            <value>
                Date into sql test (multiple queries)
            </value>
        </property>
        <property name="query">
           <list>
              <value>
                select * from SAKAI_SESSION where SESSION_START &lt; ?
              </value>
              <value>
                select count(*) from SAKAI_SESSION where SESSION_START &lt; ?
              </value>
           </list>
        </property>
        <property name="resultProcessors">
           <list>
              <ref bean="org.sakaiproject.reports.service.ResultProcessor.defaultArtifactLoader" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                A test to open an artifact and move it into the xml result.
                the column name must end in artifact in order for the code to open the column 
                as an artifact
            </value>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report5.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Last Session Date</value></property>
                    <property name="paramName"><value>[last_session_date]</value></property>
                    <property name="description"><value>the date to limit the sessions</value></property>
                    <property name="type"><value>date</value></property>
                    <property name="valueType"><value>fillin</value></property>
                    <property name="value"><value></value></property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean id="reportXsl5.1" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/report5.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                    <property name="title"><value>Sessions before a date</value></property>
                </bean>
            </list>
        </property>

    </bean>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <bean id="matrixCellCompletionStatusByUser"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677779876</value>
        </property>
        <property name="usesWarehouse"><value>true</value></property>
        <property name="title">
            <value>
                Matrix Cell Completion Status By User
            </value>
        </property>
        <property name="query">
           <list>
              <value>
                    select dw_scaffolding.title, dw_scaffolding.readyColor, dw_scaffolding.pendingColor, dw_scaffolding.lockedColor, dw_scaffolding.completedColor,
                        dw_site_users.user_id `userId`, dw_matrix.owner `matrix_userId`, `status`, 
                        dw_scaffolding_criteria.sequenceNumber `criterion_sequence`,
                            dw_scaffolding_criteria.description `criterion_description`,
                        dw_scaffolding_levels.sequenceNumber `level_sequence`,
                            dw_scaffolding_levels.description `level_description`, dw_scaffolding_cell.rootcriterion_id
                    FROM dw_scaffolding 
                    JOIN dw_site_users ON dw_scaffolding.worksiteId = dw_site_users.site_id
                    LEFT JOIN dw_matrix ON dw_site_users.user_id = dw_matrix.owner AND dw_matrix.scaffolding_id=dw_scaffolding.id
                    LEFT JOIN dw_matrix_cell ON dw_matrix.id = dw_matrix_cell.matrix_id
                    LEFT JOIN dw_wizard_page ON dw_matrix_cell.wizard_page_id = dw_wizard_page.id
                    LEFT JOIN dw_scaffolding_cell ON dw_matrix_cell.scaffolding_cell_id = dw_scaffolding_cell.id
                    LEFT JOIN dw_scaffolding_criteria ON dw_scaffolding_cell.rootcriterion_id = dw_scaffolding_criteria.id
                    LEFT JOIN dw_scaffolding_levels ON dw_scaffolding_cell.level_id = dw_scaffolding_levels.id
                                where dw_scaffolding.id=?
                    
                    ORDER BY `userId`, `criterion_sequence`, `level_sequence`
              </value>
           </list>
        </property>
        <property name="resultProcessors">
           <list>
              <ref bean="org.sakaiproject.reports.service.ResultsPostProcessor.rowcolumn" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                Matrix, student, criteria, level, status, one of reviewers defined for cell
            </value>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixCellCompletionStatus.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Choose a Matrix</value></property>
                    <property name="paramName"><value>matrixId</value></property>
                    <property name="description"><value>To choose a matrix from a worksite</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>sql</value></property>
                    <property name="value"><value>SELECT id, title FROM dw_scaffolding WHERE worksiteId = '{worksiteid}'</value></property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixCellCompletionStatus.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                    <property name="title"><value>Cell Completion Status</value></property>
                </bean>
            </list>
        </property>

    </bean>
    
    
    <bean id="matrixStatusByUser"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677779287</value>
        </property>
        <property name="title">
            <value>
                Matrix Status by User
            </value>
        </property>
        <property name="query">
           <list>
              <value><![CDATA[
                    select dw_scaffolding.title, dw_scaffolding.readyColor, dw_scaffolding.pendingColor, dw_scaffolding.lockedColor, dw_scaffolding.completedColor,
                        if(?, 'true', 'false') `random`, dw_site_users.user_id `userId`, dw_matrix.owner `matrix_userId`, `status`, 
                        dw_scaffolding_criteria.sequenceNumber `criterion_sequence`,
                            dw_scaffolding_criteria.description `criterion_description`,
                        dw_scaffolding_levels.sequenceNumber `level_sequence`,
                            dw_scaffolding_levels.description `level_description`, dw_scaffolding_cell.rootcriterion_id,
                                dw_scaffolding_cell_evaluators.id `evaluators`
                    FROM dw_scaffolding 
                    JOIN dw_site_users ON dw_scaffolding.worksiteId = dw_site_users.site_id 
                    LEFT JOIN dw_matrix ON dw_site_users.user_id = dw_matrix.owner AND dw_matrix.scaffolding_id = dw_scaffolding.id
                    LEFT JOIN dw_matrix_cell ON dw_matrix.id = dw_matrix_cell.matrix_id
                    LEFT JOIN dw_wizard_page ON dw_matrix_cell.wizard_page_id = dw_wizard_page.id
                    LEFT JOIN dw_scaffolding_cell ON dw_matrix_cell.scaffolding_cell_id = dw_scaffolding_cell.id
                    LEFT JOIN dw_scaffolding_criteria ON dw_scaffolding_cell.rootcriterion_id = dw_scaffolding_criteria.id
                    LEFT JOIN dw_scaffolding_levels ON dw_scaffolding_cell.level_id = dw_scaffolding_levels.id
                    LEFT JOIN dw_scaffolding_cell_evaluators ON 
                                dw_scaffolding_cell_evaluators.scaffolding_cell_id = dw_scaffolding_cell.id
                                where dw_scaffolding.id=?
                
                    ORDER BY `userId`, `criterion_sequence`, `level_sequence`
                    ]]>
              </value>
           </list>
        </property>
        <property name="resultProcessors">
           <list>
              <ref bean="org.sakaiproject.reports.service.ResultsPostProcessor.rowcolumn" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                Matrix, student, criteria, level, status, one of reviewers defined for cell
            </value>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatus.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Anonymizer Users</value></property>
                    <property name="paramName"><value>anonymize</value></property>
                    <property name="description"><value>Shall the users not be known?</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>set</value></property>
                    <property name="value"><value>[(0; Show User IDs), (1; Hide User IDs)]</value></property>
                </bean>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Choose a Matrix</value></property>
                    <property name="paramName"><value>matrixId</value></property>
                    <property name="description"><value>To choose a matrix from a worksite</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>sql</value></property>
                    <property name="value"><value>SELECT id, title FROM dw_scaffolding WHERE worksiteId = '{worksiteid}'</value></property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatus.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                    <property name="title"><value>Cell Completion Status</value></property>
                </bean><!-- 
                <bean id="reportXsl_ms.csv" class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="title"><value>CSV</value></property>
                    <property name="xslLink"><value>WEB-INF/reportxsls/defaultExport.xsl</value></property>
                    <property name="isExport"><value>true</value></property>
                    <property name="extension"><value>csv</value></property>
                    <property name="target"><value>_self</value></property>
                    <property name="contentType"><value>application/x-csv</value></property>
                    <property name="resultsPostProcessor">
                        <ref bean="org.sakaiproject.reports.service.ResultsPostProcessor.csv"/>
                    </property>
                </bean> -->
            </list>
        </property>

    </bean>
    
    
    <bean id="matrixStatusByOwner"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666697779287</value>
        </property>
        <property name="title">
            <value>
                Matrix Status by Owner
            </value>
        </property>
        <property name="query">
           <list>
              <value><![CDATA[
                    select dw_scaffolding.title, dw_scaffolding.readyColor, dw_scaffolding.pendingColor, dw_scaffolding.lockedColor, dw_scaffolding.completedColor,
                        if(?, 'true', 'false') `random`, dw_site_users.user_id `userId`, dw_matrix.owner `matrix_userId`, `status`, 
                        dw_scaffolding_criteria.sequenceNumber `criterion_sequence`,
                            dw_scaffolding_criteria.description `criterion_description`,
                        dw_scaffolding_levels.sequenceNumber `level_sequence`,
                            dw_scaffolding_levels.description `level_description`, dw_scaffolding_cell.rootcriterion_id,
                                -- dw_scaffolding_cell_evaluators.id `evaluators`, 
                                dw_review_items.review_content_id `evaluation_artifact`,
                                dw_resource.created_by
                    FROM dw_scaffolding 
                    JOIN dw_site_users ON dw_scaffolding.worksiteId = dw_site_users.site_id -- get the users for the site
                    LEFT JOIN dw_matrix ON dw_site_users.user_id = dw_matrix.owner AND dw_matrix.scaffolding_id = dw_scaffolding.id
                    LEFT JOIN dw_matrix_cell ON dw_matrix.id = dw_matrix_cell.matrix_id
                    LEFT JOIN dw_wizard_page ON dw_matrix_cell.wizard_page_id = dw_wizard_page.id
                    LEFT JOIN dw_scaffolding_cell ON dw_matrix_cell.scaffolding_cell_id = dw_scaffolding_cell.id
                    LEFT JOIN dw_scaffolding_criteria ON dw_scaffolding_cell.rootcriterion_id = dw_scaffolding_criteria.id
                    LEFT JOIN dw_scaffolding_levels ON dw_scaffolding_cell.level_id = dw_scaffolding_levels.id
                    
                    LEFT JOIN dw_review_items ON dw_review_items.parent_id=dw_wizard_page.id AND 
                                                    dw_review_items.review_type = 1 -- reflection=0, eval=1, review=2
                    -- by this point we have all the cells' evaluations for each evaluator for each cell for each user
                    --  and we want to link the evaluators' evaluation
                    LEFT JOIN dw_resource ON dw_review_items.review_content_id=dw_resource.id
                    
                   -- LEFT JOIN dw_scaffolding_cell_evaluators ON 
                   --             dw_scaffolding_cell_evaluators.scaffolding_cell_id = dw_scaffolding_cell.id
                    where dw_scaffolding.id=?
                
                    ORDER BY `userId`, `criterion_sequence`, `level_sequence`, `created_by`
                    ]]>
              </value>
           </list>
        </property>
        <property name="resultProcessors">
           <list>
              <ref bean="org.sakaiproject.reports.service.ResultsPostProcessor.rowcolumneval" />
              <ref bean="org.sakaiproject.reports.service.ResultProcessor.defaultArtifactLoader" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                Matrix, student, criteria, level, status, one of reviewers defined for cell
            </value>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatusByOwner.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Anonymizer Users</value></property>
                    <property name="paramName"><value>anonymize</value></property>
                    <property name="description"><value>Shall the users not be known?</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>set</value></property>
                    <property name="value"><value>[(0; Show User IDs), (1; Hide User IDs)]</value></property>
                </bean>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Choose a Matrix</value></property>
                    <property name="paramName"><value>matrixId</value></property>
                    <property name="description"><value>To choose a matrix from a worksite</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>sql</value></property>
                    <property name="value"><value>SELECT id, title FROM dw_scaffolding WHERE worksiteId = '{worksiteid}'</value></property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatusByOwner.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                    <property name="title"><value>Cell Completion Status</value></property>
                </bean>
            </list>
        </property>

    </bean>
    
    <bean id="matrixStatusByLevel"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666697779287</value>
        </property>
        <property name="title">
            <value>
                Matrix Status by Level
            </value>
        </property>
        <property name="query">
           <list>
              <value><![CDATA[
                    select dw_scaffolding.title, dw_scaffolding.readyColor, dw_scaffolding.pendingColor, dw_scaffolding.lockedColor, dw_scaffolding.completedColor,
                        if(?, 'true', 'false') `random`, dw_site_users.user_id `userId`, dw_matrix.owner `matrix_userId`, `status`, 
                        dw_scaffolding_criteria.sequenceNumber `criterion_sequence`,
                            dw_scaffolding_criteria.description `criterion_description`,
                        dw_scaffolding_levels.sequenceNumber `level_sequence`,
                            dw_scaffolding_levels.description `level_description`, dw_scaffolding_cell.rootcriterion_id,
                        dw_review_items.review_content_id `review_artifact`
                    FROM dw_scaffolding 
                    JOIN dw_site_users ON dw_scaffolding.worksiteId = dw_site_users.site_id 
                    LEFT JOIN dw_matrix ON dw_site_users.user_id = dw_matrix.owner AND dw_matrix.scaffolding_id = dw_scaffolding.id
                    LEFT JOIN dw_matrix_cell ON dw_matrix.id = dw_matrix_cell.matrix_id
                    LEFT JOIN dw_wizard_page ON dw_matrix_cell.wizard_page_id = dw_wizard_page.id
                    LEFT JOIN dw_scaffolding_cell ON dw_matrix_cell.scaffolding_cell_id = dw_scaffolding_cell.id
                    LEFT JOIN dw_scaffolding_criteria ON dw_scaffolding_cell.rootcriterion_id = dw_scaffolding_criteria.id
                    LEFT JOIN dw_scaffolding_levels ON dw_scaffolding_cell.level_id = dw_scaffolding_levels.id
                    LEFT JOIN dw_review_items ON dw_matrix_cell.wizard_page_id = dw_review_items.id
                                where dw_scaffolding.id=?
                
                    ORDER BY `level_sequence`, `userId`, `criterion_sequence`
                    ]]>
              </value>
           </list>
        </property>
        <property name="resultProcessors">
           <list>
              <ref bean="org.sakaiproject.reports.service.ResultsPostProcessor.rowcolumn" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                Matrix, student, criteria, level, status, one of reviewers defined for cell
            </value>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatusByLevel.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Anonymizer Users</value></property>
                    <property name="paramName"><value>anonymize</value></property>
                    <property name="description"><value>Shall the users not be known?</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>set</value></property>
                    <property name="value"><value>[(0; Show User IDs), (1; Hide User IDs)]</value></property>
                </bean>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Choose a Matrix</value></property>
                    <property name="paramName"><value>matrixId</value></property>
                    <property name="description"><value>To choose a matrix from a worksite</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>sql</value></property>
                    <property name="value"><value>SELECT id, title FROM dw_scaffolding WHERE worksiteId = '{worksiteid}'</value></property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatusByLevel.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                    <property name="title"><value>Cell Completion Status</value></property>
                </bean>
            </list>
        </property>

    </bean>
    
    <bean id="matrixStatusByLevelDirectDB"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5551-666697779287</value>
        </property>
        <property name="usesWarehouse"><value>false</value></property>
        <property name="title">
            <value>
                Matrix Status by Level (Direct DB)
            </value>
        </property>
        <property name="query">
           <list>
              <value><![CDATA[
                    select osp_scaffolding.title, osp_scaffolding.readyColor, osp_scaffolding.pendingColor, osp_scaffolding.lockedColor, osp_scaffolding.completedColor,
                        ? random, eid userId, osp_matrix.owner matrix_userId, status, 
                        osp_scaffolding_criteria.seq_num criterion_sequence,
                            crit_label.description criterion_description,
                        osp_scaffolding_levels.seq_num level_sequence,
                            level_label.description level_description, 
                        osp_scaffolding_cell.rootcriterion_id,
                        osp_review.review_content_id review_artifact
                    FROM osp_scaffolding 
                    JOIN sakai_site_user ON osp_scaffolding.worksiteId = sakai_site_user.site_id 
                    JOIN sakai_user_id_map ON sakai_site_user.user_id=sakai_user_id_map.USER_ID
                    LEFT JOIN osp_matrix ON sakai_site_user.user_id = osp_matrix.owner AND osp_matrix.scaffolding_id = osp_scaffolding.id
                    LEFT JOIN osp_matrix_cell ON osp_matrix.id = osp_matrix_cell.matrix_id
                    LEFT JOIN osp_wizard_page ON osp_matrix_cell.wizard_page_id = osp_wizard_page.id
                    LEFT JOIN osp_scaffolding_cell ON osp_matrix_cell.scaffolding_cell_id = osp_scaffolding_cell.id

                    LEFT JOIN osp_scaffolding_criteria ON osp_scaffolding_cell.rootcriterion_id = osp_scaffolding_criteria.elt
                    LEFT JOIN osp_matrix_label crit_label ON osp_scaffolding_criteria.elt=crit_label.id
                    LEFT JOIN osp_scaffolding_levels ON osp_scaffolding_cell.level_id = osp_scaffolding_levels.elt
                    LEFT JOIN osp_matrix_label level_label ON osp_scaffolding_levels.elt=level_label.id

                    LEFT JOIN osp_review ON osp_matrix_cell.wizard_page_id = osp_review.id
                                where osp_scaffolding.id=?
                
                    ORDER BY userId, level_sequence, criterion_sequence
                    ]]>
              </value>
           </list>
        </property>
        <property name="resultProcessors">
           <list>
              <ref bean="org.sakaiproject.reports.service.ResultsPostProcessor.rowcolumnupper" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                Matrix, student, criteria, level, status, one of reviewers defined for cell
            </value>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatusByLevelDDB.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Anonymizer Users</value></property>
                    <property name="paramName"><value>anonymize</value></property>
                    <property name="description"><value>Shall the users not be known?</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>set</value></property>
                    <property name="value"><value>[(0; Show User IDs), (1; Hide User IDs)]</value></property>
                </bean>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Choose a Matrix</value></property>
                    <property name="paramName"><value>matrixId</value></property>
                    <property name="description"><value>To choose a matrix from a worksite</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>sql</value></property>
                    <property name="value"><value>SELECT id, title FROM osp_scaffolding WHERE worksiteId = '{worksiteid}'</value></property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatusByLevelDDB.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                    <property name="title"><value>Cell Completion Status</value></property>
                </bean>
            </list>
        </property>

    </bean>
    
    
    <bean id="matrixScoreByReviewer"
        class="org.sakaiproject.reports.model.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666697779287</value>
        </property>
        <property name="title">
            <value>
                Matrix Status by Reviewer
            </value>
        </property>
        <property name="query">
           <list>
              <value><![CDATA[
                    
                    select dw_scaffolding.title, dw_scaffolding.readyColor, dw_scaffolding.pendingColor, dw_scaffolding.lockedColor, dw_scaffolding.completedColor,
                        if(?, 'true', 'false') `random`, dw_site_users.user_id `userId`, dw_matrix.owner `matrix_userId`, `status`, 
                        dw_scaffolding_criteria.sequenceNumber `criterion_sequence`,
                            dw_scaffolding_criteria.description `criterion_description`,
                        dw_scaffolding_levels.sequenceNumber `level_sequence`,
                            dw_scaffolding_levels.description `level_description`, dw_scaffolding_cell.rootcriterion_id,
                                dw_scaffolding_cell_evaluators.id `evaluators`, dw_review_items.review_content_id `evaluation_artifact`,
                                dw_resource.created_by
                    FROM dw_scaffolding 
                    JOIN dw_site_users ON dw_scaffolding.worksiteId = dw_site_users.site_id -- get the users for the site
                    LEFT JOIN dw_matrix ON dw_site_users.user_id = dw_matrix.owner AND dw_matrix.scaffolding_id = dw_scaffolding.id
                    LEFT JOIN dw_matrix_cell ON dw_matrix.id = dw_matrix_cell.matrix_id
                    LEFT JOIN dw_wizard_page ON dw_matrix_cell.wizard_page_id = dw_wizard_page.id
                    LEFT JOIN dw_scaffolding_cell ON dw_matrix_cell.scaffolding_cell_id = dw_scaffolding_cell.id
                    LEFT JOIN dw_scaffolding_criteria ON dw_scaffolding_cell.rootcriterion_id = dw_scaffolding_criteria.id
                    LEFT JOIN dw_scaffolding_levels ON dw_scaffolding_cell.level_id = dw_scaffolding_levels.id
                    
                    LEFT JOIN dw_review_items ON dw_review_items.parent_id=dw_wizard_page.id AND 
                                                    dw_review_items.review_type = 1 -- reflection=0, eval=1, review=2
                    -- by this point we have all the cells' evaluations for each evaluator for each cell for each user
                    --  and we want to link the evaluators' evaluation
                    LEFT JOIN dw_resource ON dw_review_items.review_content_id=dw_resource.id
                    
                    LEFT JOIN dw_scaffolding_cell_evaluators ON 
                                dw_scaffolding_cell_evaluators.scaffolding_cell_id = dw_scaffolding_cell.id
                    where dw_scaffolding.id=?
                
                    ORDER BY `userId`, `criterion_sequence`, `level_sequence`, `evaluators`, `created_by`
                    
                    ]]>
              </value>
           </list>
        </property>
        <property name="resultProcessors">
           <list>
              <ref bean="org.sakaiproject.reports.service.ResultsPostProcessor.rowcolumneval" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                This report lists out each Reviewer.  Then for each reviewer
            </value>
        </property>
        <property name="siteType">
            <value>admin,project,course,portfolioAdmin,portfolio</value>
        </property>
        <property name="defaultXsl">
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatusByReviewer.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Anonymizer Users</value></property>
                    <property name="paramName"><value>anonymize</value></property>
                    <property name="description"><value>Shall the users not be known?</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>set</value></property>
                    <property name="value"><value>[(0; Show User IDs), (1; Hide User IDs)]</value></property>
                </bean>
                <bean class="org.sakaiproject.reports.model.ReportDefinitionParam">
                    <property name="title"><value>Choose a Matrix</value></property>
                    <property name="paramName"><value>matrixId</value></property>
                    <property name="description"><value>To choose a matrix from a worksite</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>sql</value></property>
                    <property name="value"><value>SELECT id, title FROM dw_scaffolding WHERE worksiteId = '{worksiteid}'</value></property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean class="org.sakaiproject.reports.model.ReportXsl">
                    <property name="xslLink"><value>WEB-INF/reportxsls/matrixStatusByReviewer.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                    <property name="title"><value>Cell Completion Status</value></property>
                </bean>
            </list>
        </property>

    </bean>
    

</beans>
